<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>OP_STAKE Dashboard</title>

<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
body{
  margin:0;
  background:#0b0f1a;
  color:#e5e7eb;
  font-family:Arial;
}
.container{
  max-width:1000px;
  margin:auto;
  padding:30px;
}
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:30px;
}
.logo{
  font-size:22px;
  font-weight:bold;
  color:#f7931a;
}
button{
  padding:8px 16px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}
.connect{
  background:#f7931a;
}
.card{
  background:#141a2b;
  padding:20px;
  border-radius:10px;
  margin-bottom:20px;
}
.stats{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
}
.stat{
  flex:1;
  background:#1c2236;
  padding:15px;
  border-radius:8px;
}
input{
  padding:8px;
  border-radius:6px;
  border:none;
  width:120px;
  margin-right:10px;
}
.stake-btn{
  background:#22c55e;
}
.withdraw-btn{
  background:#ef4444;
  margin-left:10px;
}
.history-item{
  font-size:14px;
  margin-bottom:6px;
  color:#9ca3af;
}
</style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">

const { useState } = React;

function App(){
  const [connected,setConnected]=useState(false);
  const [balance,setBalance]=useState(1.0);
  const [staked,setStaked]=useState(0);
  const [reward,setReward]=useState(0);
  const [amount,setAmount]=useState("");
  const [history,setHistory]=useState([]);

  const connect=()=>{
    setConnected(true);
  }

  const stake=()=>{
    const amt=parseFloat(amount);
    if(!amt || amt<=0 || amt>balance) return;
    setBalance(balance-amt);
    setStaked(staked+amt);
    setHistory([{
  type:"Stake",
  amount:amt,
  date:new Date().toLocaleString(),
  tx:"0x"+Math.random().toString(16).slice(2,10)
},...history]);
    setAmount("");
  }

  const simulateReward=()=>{
    const earned=staked*0.01;
    setReward(reward+earned);
    setHistory([{
  type:"Reward",
  amount:amt,
  date:new Date().toLocaleString(),
  tx:"0x"+Math.random().toString(16).slice(2,10)
},...history]);
  }

  const withdraw=()=>{
    setBalance(balance+staked+reward);
    setHistory([{
  type:"Withdraw",
  amount:amt,
  date:new Date().toLocaleString(),
  tx:"0x"+Math.random().toString(16).slice(2,10)
},...history]);
    setStaked(0);
    setReward(0);
  }

  return(
    <div className="container">

      <div className="header">
  <div>
    <div className="logo">OP_STAKE</div>
    <div style={{fontSize:"12px",color:"#9ca3af"}}>
      Native Bitcoin L1 Staking Protocol — OP_NET Testnet
    </div>
  </div>
        {!connected ? 
  <button className="connect" onClick={connect}>Connect OP_Wallet</button> :
  <div style={{fontSize:"12px"}}>
    bc1q8f3x...92kp • OP_NET
  </div>
}
      </div>

      {!connected ? (
        <div className="card">
          Connect your wallet to start staking BTC on OP_NET.
        </div>
      ):(
        <>
          <div className="stats">
            <div className="stat">
              <div>Wallet Balance</div>
              <div>{balance.toFixed(4)} BTC</div>
            </div>
            <div className="stat">
              <div>Total Staked</div>
              <div>{staked.toFixed(4)} BTC</div>
            </div>
            <div className="stat">
              <div>Rewards</div>
              <div>{reward.toFixed(4)} BTC</div>
            </div>
          </div>
<div className="card" style={{background:"#1a2238"}}>
  <div style={{fontSize:"14px",color:"#22c55e"}}>
    Fixed APY: 12.5% — Rewards accrue per simulation cycle
  </div>
</div>
          <div className="card">
            <h3>Stake BTC</h3>
            <input 
              type="number"
              value={amount}
              onChange={e=>setAmount(e.target.value)}
              placeholder="0.1"
            />
            <button className="stake-btn" onClick={stake}>Stake</button>
            <button onClick={simulateReward}>Simulate Reward</button>
            <button className="withdraw-btn" onClick={withdraw}>Withdraw All</button>
          </div>

          <div className="card">
            <h3>Transaction History</h3>
            {history.length===0 && <div className="history-item">No transactions yet</div>}
            {history.map((h,i)=>(
              <div key={i} className="history-item">
                {h.type} {h.amount.toFixed(4)} BTC  
<br/>
<span style={{fontSize:"11px",color:"#6b7280"}}>
TX: {h.tx} • {h.date}
</span>
              </div>
            ))}
          </div>
        </>
      )}

    </div>
  )
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);

</script>

</body>
</html>
